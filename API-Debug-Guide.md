# Indienstein Web API 调试指南

## 🐱 主要修复内容

小猫娘已经修复了以下API结构问题：

### 1. **消息格式标准化**
- 统一使用OpenAI标准的API格式
- 自动转换字符串消息为标准对象格式
- 添加了供应商特定的参数适配

### 2. **错误处理增强**
- 详细的错误日志记录
- 400错误的具体错误信息显示
- 请求和响应的完整调试信息

### 3. **调试功能**
- 新增调试信息面板（总览页面）
- 实时显示API请求状态
- Console日志重定向到界面

## 🔧 使用调试功能

### 步骤1：打开调试面板
1. 进入应用的**总览**页面
2. 滚动到底部找到**调试信息**卡片
3. 所有日志和错误会自动显示在这里

### 步骤2：诊断400错误
当出现400错误时，调试面板会显示：
- 具体的错误响应内容
- 发送的请求数据
- API端点和供应商信息
- 请求头信息

### 步骤3：常见问题排查

#### API Key问题
- 检查API Key是否正确设置
- 确认API Key对应的供应商是否正确

#### 模型问题
- 确认选择的模型是否在该供应商下可用
- 检查模型ID是否正确

#### 请求格式问题
- 查看调试信息中的请求数据格式
- 确认消息格式是否符合API规范

## 🚀 快速修复指南

### 400错误常见原因：

1. **API Key错误**
   ```
   解决：在总览页面重新设置正确的API Key
   ```

2. **模型不匹配**
   ```
   解决：在Indienstein页面选择正确的供应商和模型
   ```

3. **消息格式错误**
   ```
   解决：已自动修复，消息会自动标准化
   ```

4. **供应商特定参数**
   ```
   解决：已添加智谱AI等供应商的特殊参数支持
   ```

## 📝 调试日志类型

- 🔵 **蓝色日志**：正常信息（API请求开始、完成等）
- 🟡 **黄色日志**：警告信息（配置问题等）
- 🔴 **红色日志**：错误信息（API失败、异常等）

## 🎯 重要提示

1. **清空日志**：点击调试信息右上角的"清空"按钮
2. **实时监控**：生成过程中可以实时查看API交互
3. **错误复现**：遇到问题时，先查看调试信息再报告

---

*喵~ 如果还有问题，请查看调试信息中的详细错误内容，这样小猫娘可以更好地帮助你解决问题呢！* 