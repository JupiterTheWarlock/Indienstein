<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ä¿¡æ¯ç©ºé—´æ¨¡å—æµ‹è¯• - Indienstein</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css" rel="stylesheet">
    <style>
        .vector-card {
            transition: all 0.3s ease;
            cursor: pointer;
        }
        .vector-card:hover {
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            transform: translateY(-2px);
        }
        .dimension-stats .progress {
            height: 6px;
        }
        .test-section {
            border-left: 4px solid #007bff;
            padding-left: 15px;
            margin-bottom: 20px;
        }
        .cursor-pointer {
            cursor: pointer;
        }
        .test-log {
            font-family: monospace;
            font-size: 0.9em;
        }
    </style>
</head>
<body>
    <div class="container-fluid py-4">
        <!-- å¤´éƒ¨æ ‡é¢˜ -->
        <div class="row mb-4">
            <div class="col-12">
                <h1 class="display-6 text-primary mb-3">
                    <i class="bi bi-database me-3"></i>ä¿¡æ¯ç©ºé—´æ¨¡å—æµ‹è¯•
                </h1>
                <p class="text-muted">å…¨é¢æµ‹è¯•Indienstein Webç‰ˆçš„ä¿¡æ¯ç©ºé—´åŠŸèƒ½æ¨¡å—</p>
            </div>
        </div>

        <!-- æµ‹è¯•æ§åˆ¶é¢æ¿ -->
        <div class="row mb-4">
            <div class="col-12">
                <div class="card">
                    <div class="card-header bg-primary text-white">
                        <h5 class="card-title mb-0">
                            <i class="bi bi-gear me-2"></i>æµ‹è¯•æ§åˆ¶é¢æ¿
                        </h5>
                    </div>
                    <div class="card-body">
                        <div class="row g-3">
                            <div class="col-md-6">
                                <h6>åŸºç¡€åŠŸèƒ½æµ‹è¯•</h6>
                                <div class="d-flex gap-2 flex-wrap">
                                    <button class="btn btn-primary btn-sm" onclick="initializeInfoSpace()">
                                        <i class="bi bi-play-circle me-1"></i>åˆå§‹åŒ–æ¨¡å—
                                    </button>
                                    <button class="btn btn-success btn-sm" onclick="testDimensionManagement()">
                                        <i class="bi bi-collection me-1"></i>æµ‹è¯•ç»´åº¦ç®¡ç†
                                    </button>
                                    <button class="btn btn-info btn-sm" onclick="testVectorBrowser()">
                                        <i class="bi bi-grid me-1"></i>æµ‹è¯•å‘é‡æµè§ˆ
                                    </button>
                                    <button class="btn btn-warning btn-sm" onclick="testDataStats()">
                                        <i class="bi bi-bar-chart me-1"></i>æµ‹è¯•æ•°æ®ç»Ÿè®¡
                                    </button>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <h6>äº¤äº’åŠŸèƒ½æµ‹è¯•</h6>
                                <div class="d-flex gap-2 flex-wrap">
                                    <button class="btn btn-outline-primary btn-sm" onclick="testSearchFunction()">
                                        <i class="bi bi-search me-1"></i>æµ‹è¯•æœç´¢
                                    </button>
                                    <button class="btn btn-outline-success btn-sm" onclick="testFilterFunction()">
                                        <i class="bi bi-funnel me-1"></i>æµ‹è¯•è¿‡æ»¤
                                    </button>
                                    <button class="btn btn-outline-warning btn-sm" onclick="testExportFunction()">
                                        <i class="bi bi-download me-1"></i>æµ‹è¯•å¯¼å‡º
                                    </button>
                                    <button class="btn btn-outline-danger btn-sm" onclick="runFullTest()">
                                        <i class="bi bi-check-all me-1"></i>å®Œæ•´æµ‹è¯•
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        <div class="row mt-3">
                            <div class="col-12">
                                <h6>å¿«é€Ÿæ“ä½œ</h6>
                                <div class="d-flex gap-2 flex-wrap">
                                    <button class="btn btn-outline-secondary btn-sm" onclick="infoSpaceModule.refresh()">
                                        <i class="bi bi-arrow-clockwise me-1"></i>åˆ·æ–°æ•°æ®
                                    </button>
                                    <button class="btn btn-outline-secondary btn-sm" onclick="clearTestLog()">
                                        <i class="bi bi-trash3 me-1"></i>æ¸…ç©ºæ—¥å¿—
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ä¸»è¦å†…å®¹åŒºåŸŸ -->
        <div class="row g-4">
            <!-- å·¦ä¾§ï¼šç»´åº¦åˆ—è¡¨ -->
            <div class="col-lg-3">
                <div class="test-section">
                    <h6 class="text-primary">3.1 ç»´åº¦ç®¡ç†æµ‹è¯•</h6>
                    <div id="dimensionList">
                        <div class="card">
                            <div class="card-body text-center">
                                <i class="bi bi-hourglass-split text-muted fs-1"></i>
                                <p class="text-muted mt-2">ç­‰å¾…åˆå§‹åŒ–...</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ä¸­é—´ï¼šç»´åº¦è¯¦æƒ…å’Œå‘é‡æµè§ˆ -->
            <div class="col-lg-6">
                <div class="test-section mb-4">
                    <h6 class="text-info">ç»´åº¦è¯¦æƒ…</h6>
                    <div id="dimensionDetails">
                        <div class="card">
                            <div class="card-body text-center">
                                <i class="bi bi-info-circle text-muted fs-1"></i>
                                <p class="text-muted mt-2">é€‰æ‹©ç»´åº¦åæ˜¾ç¤ºè¯¦æƒ…...</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="test-section">
                    <h6 class="text-success">3.2 å‘é‡æµè§ˆå™¨æµ‹è¯•</h6>
                    <div id="vectorBrowser">
                        <div class="card">
                            <div class="card-body text-center">
                                <i class="bi bi-grid text-muted fs-1"></i>
                                <p class="text-muted mt-2">å‘é‡æµè§ˆå™¨åŒºåŸŸ...</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- å³ä¾§ï¼šæ•°æ®ç»Ÿè®¡ -->
            <div class="col-lg-3">
                <div class="test-section">
                    <h6 class="text-warning">3.3 æ•°æ®ç»Ÿè®¡åˆ†ææµ‹è¯•</h6>
                    <div id="dataStats">
                        <div class="card">
                            <div class="card-body text-center">
                                <i class="bi bi-bar-chart text-muted fs-1"></i>
                                <p class="text-muted mt-2">ç»Ÿè®¡æ•°æ®åŠ è½½ä¸­...</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- æµ‹è¯•ç»“æœå’Œæ—¥å¿— -->
        <div class="row mt-4">
            <div class="col-md-6">
                <div class="card">
                    <div class="card-header bg-success text-white">
                        <h6 class="card-title mb-0">
                            <i class="bi bi-check-circle me-2"></i>æµ‹è¯•ç»“æœ
                        </h6>
                    </div>
                    <div class="card-body">
                        <div id="testResults">
                            <div class="text-muted">æµ‹è¯•ç»“æœå°†åœ¨è¿™é‡Œæ˜¾ç¤º...</div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="col-md-6">
                <div class="card">
                    <div class="card-header bg-info text-white">
                        <h6 class="card-title mb-0">
                            <i class="bi bi-terminal me-2"></i>æµ‹è¯•æ—¥å¿—
                        </h6>
                    </div>
                    <div class="card-body">
                        <div id="testLog" class="bg-dark text-light p-3 rounded test-log" style="height: 300px; overflow-y: auto;">
                            <div class="text-success">[INFO] ä¿¡æ¯ç©ºé—´æ¨¡å—æµ‹è¯•é¡µé¢å·²åŠ è½½</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- åŠ è½½è„šæœ¬ -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="js/infoSpace.js"></script>
    <script src="js/infoSpaceModule.js"></script>

    <script>
        // æµ‹è¯•æ¡†æ¶
        let testResults = {
            dimensionManagement: false,
            vectorBrowser: false,
            dataStats: false,
            searchFunction: false,
            filterFunction: false,
            exportFunction: false
        };

        // æ—¥å¿—åŠŸèƒ½
        function log(message, type = 'info') {
            const logElement = document.getElementById('testLog');
            const timestamp = new Date().toLocaleTimeString();
            const typeColor = {
                'info': 'text-info',
                'success': 'text-success', 
                'warning': 'text-warning',
                'error': 'text-danger',
                'test': 'text-primary'
            }[type] || 'text-light';
            
            const logLine = document.createElement('div');
            logLine.className = typeColor;
            logLine.innerHTML = `[${timestamp}] ${message}`;
            logElement.appendChild(logLine);
            logElement.scrollTop = logElement.scrollHeight;
            
            console.log(`[${type.toUpperCase()}] ${message}`);
        }

        function clearTestLog() {
            document.getElementById('testLog').innerHTML = '';
            log('æµ‹è¯•æ—¥å¿—å·²æ¸…ç©º');
        }

        // æ›´æ–°æµ‹è¯•ç»“æœæ˜¾ç¤º
        function updateTestResults() {
            const resultsContainer = document.getElementById('testResults');
            const passedTests = Object.values(testResults).filter(result => result).length;
            const totalTests = Object.keys(testResults).length;
            
            let html = `
                <div class="mb-3">
                    <div class="d-flex justify-content-between align-items-center">
                        <span>æµ‹è¯•è¿›åº¦:</span>
                        <span class="badge ${passedTests === totalTests ? 'bg-success' : 'bg-warning'}">
                            ${passedTests}/${totalTests}
                        </span>
                    </div>
                    <div class="progress mt-2" style="height: 8px;">
                        <div class="progress-bar ${passedTests === totalTests ? 'bg-success' : 'bg-warning'}" 
                             style="width: ${(passedTests/totalTests)*100}%"></div>
                    </div>
                </div>
                
                <div class="test-checklist">
            `;
            
            Object.entries(testResults).forEach(([test, passed]) => {
                const testNames = {
                    'dimensionManagement': 'ç»´åº¦ç®¡ç†',
                    'vectorBrowser': 'å‘é‡æµè§ˆå™¨',
                    'dataStats': 'æ•°æ®ç»Ÿè®¡',
                    'searchFunction': 'æœç´¢åŠŸèƒ½',
                    'filterFunction': 'è¿‡æ»¤åŠŸèƒ½',
                    'exportFunction': 'å¯¼å‡ºåŠŸèƒ½'
                };
                
                html += `
                    <div class="d-flex align-items-center mb-2">
                        <i class="bi ${passed ? 'bi-check-circle text-success' : 'bi-circle text-muted'} me-2"></i>
                        <span class="${passed ? 'text-success' : 'text-muted'}">${testNames[test]}</span>
                    </div>
                `;
            });
            
            html += '</div>';
            resultsContainer.innerHTML = html;
        }

        // åˆå§‹åŒ–ä¿¡æ¯ç©ºé—´æ¨¡å—
        async function initializeInfoSpace() {
            try {
                log('å¼€å§‹åˆå§‹åŒ–ä¿¡æ¯ç©ºé—´æ¨¡å—...', 'test');
                
                // ç¡®ä¿InfoSpaceå·²åˆå§‹åŒ–
                InfoSpace.init();
                log('InfoSpaceåŸºç¡€æ•°æ®å·²åŠ è½½', 'success');
                
                // åˆå§‹åŒ–InfoSpaceModule
                infoSpaceModule.initialize();
                log('InfoSpaceModuleå·²åˆå§‹åŒ–', 'success');
                
                log('ä¿¡æ¯ç©ºé—´æ¨¡å—åˆå§‹åŒ–å®Œæˆï¼', 'success');
                
            } catch (error) {
                log(`åˆå§‹åŒ–å¤±è´¥: ${error.message}`, 'error');
                console.error('InfoSpaceåˆå§‹åŒ–é”™è¯¯:', error);
            }
        }

        // æµ‹è¯•ç»´åº¦ç®¡ç†åŠŸèƒ½
        function testDimensionManagement() {
            try {
                log('å¼€å§‹æµ‹è¯•ç»´åº¦ç®¡ç†åŠŸèƒ½...', 'test');
                
                // æµ‹è¯•ç»´åº¦åˆ—è¡¨æ¸²æŸ“
                infoSpaceModule.renderDimensionList();
                log('âœ“ ç»´åº¦åˆ—è¡¨æ¸²æŸ“æµ‹è¯•é€šè¿‡', 'success');
                
                // æµ‹è¯•ç»´åº¦é€‰æ‹©
                const dimensions = InfoSpace.getAllDimensions();
                if (dimensions.length > 0) {
                    infoSpaceModule.selectDimension(dimensions[0].id);
                    log(`âœ“ ç»´åº¦é€‰æ‹©æµ‹è¯•é€šè¿‡ - å·²é€‰æ‹©: ${dimensions[0].name}`, 'success');
                    
                    // æµ‹è¯•ç»´åº¦è¯¦æƒ…
                    infoSpaceModule.renderDimensionDetails();
                    log('âœ“ ç»´åº¦è¯¦æƒ…æ¸²æŸ“æµ‹è¯•é€šè¿‡', 'success');
                } else {
                    log('âš  æ²¡æœ‰å¯ç”¨çš„ç»´åº¦è¿›è¡Œæµ‹è¯•', 'warning');
                }
                
                testResults.dimensionManagement = true;
                updateTestResults();
                log('ç»´åº¦ç®¡ç†åŠŸèƒ½æµ‹è¯•å®Œæˆï¼', 'success');
                
            } catch (error) {
                log(`ç»´åº¦ç®¡ç†æµ‹è¯•å¤±è´¥: ${error.message}`, 'error');
                testResults.dimensionManagement = false;
                updateTestResults();
            }
        }

        // æµ‹è¯•å‘é‡æµè§ˆå™¨åŠŸèƒ½
        function testVectorBrowser() {
            try {
                log('å¼€å§‹æµ‹è¯•å‘é‡æµè§ˆå™¨åŠŸèƒ½...', 'test');
                
                // ç¡®ä¿å·²é€‰æ‹©ç»´åº¦
                const dimensions = InfoSpace.getAllDimensions();
                if (dimensions.length > 0) {
                    infoSpaceModule.selectDimension(dimensions[0].id);
                    
                    // æµ‹è¯•å‘é‡æµè§ˆå™¨æ¸²æŸ“
                    infoSpaceModule.renderVectorBrowser();
                    log('âœ“ å‘é‡æµè§ˆå™¨æ¸²æŸ“æµ‹è¯•é€šè¿‡', 'success');
                    
                    // æµ‹è¯•å‘é‡é€‰æ‹©ï¼ˆæ¨¡æ‹Ÿï¼‰
                    const dimension = InfoSpace.dimensions[dimensions[0].id];
                    if (dimension.vectors && dimension.vectors.length > 0) {
                        const testVector = dimension.vectors[0];
                        log(`âœ“ å‘é‡æ•°æ®å¯ç”¨ - æµ‹è¯•å‘é‡: ${testVector.name}`, 'success');
                        
                        // æµ‹è¯•å‘é‡è¯¦æƒ…æŸ¥çœ‹
                        log('âœ“ å‘é‡è¯¦æƒ…åŠŸèƒ½å¯ç”¨', 'success');
                    } else {
                        log('âš  è¯¥ç»´åº¦æ²¡æœ‰å‘é‡æ•°æ®', 'warning');
                    }
                    
                    testResults.vectorBrowser = true;
                } else {
                    log('âš  æ²¡æœ‰å¯ç”¨çš„ç»´åº¦è¿›è¡Œå‘é‡æµè§ˆæµ‹è¯•', 'warning');
                    testResults.vectorBrowser = false;
                }
                
                updateTestResults();
                log('å‘é‡æµè§ˆå™¨åŠŸèƒ½æµ‹è¯•å®Œæˆï¼', 'success');
                
            } catch (error) {
                log(`å‘é‡æµè§ˆå™¨æµ‹è¯•å¤±è´¥: ${error.message}`, 'error');
                testResults.vectorBrowser = false;
                updateTestResults();
            }
        }

        // æµ‹è¯•æ•°æ®ç»Ÿè®¡åŠŸèƒ½
        function testDataStats() {
            try {
                log('å¼€å§‹æµ‹è¯•æ•°æ®ç»Ÿè®¡åŠŸèƒ½...', 'test');
                
                // æµ‹è¯•ç»Ÿè®¡æ•°æ®æ¸²æŸ“
                infoSpaceModule.renderDataStats();
                log('âœ“ æ•°æ®ç»Ÿè®¡æ¸²æŸ“æµ‹è¯•é€šè¿‡', 'success');
                
                // éªŒè¯ç»Ÿè®¡æ•°æ®å‡†ç¡®æ€§
                const dimensions = InfoSpace.getAllDimensions();
                const totalVectors = dimensions.reduce((sum, dim) => {
                    return sum + (dim.vectors ? dim.vectors.length : 0);
                }, 0);
                
                log(`âœ“ ç»Ÿè®¡éªŒè¯ - ç»´åº¦æ•°: ${dimensions.length}, å‘é‡æ•°: ${totalVectors}`, 'success');
                
                testResults.dataStats = true;
                updateTestResults();
                log('æ•°æ®ç»Ÿè®¡åŠŸèƒ½æµ‹è¯•å®Œæˆï¼', 'success');
                
            } catch (error) {
                log(`æ•°æ®ç»Ÿè®¡æµ‹è¯•å¤±è´¥: ${error.message}`, 'error');
                testResults.dataStats = false;
                updateTestResults();
            }
        }

        // æµ‹è¯•æœç´¢åŠŸèƒ½
        function testSearchFunction() {
            try {
                log('å¼€å§‹æµ‹è¯•æœç´¢åŠŸèƒ½...', 'test');
                
                // ç¡®ä¿å·²é€‰æ‹©ç»´åº¦
                const dimensions = InfoSpace.getAllDimensions();
                if (dimensions.length > 0) {
                    infoSpaceModule.selectDimension(dimensions[0].id);
                    
                    // æ¨¡æ‹Ÿæœç´¢è¾“å…¥
                    const mockEvent = { target: { value: 'å¤ªç©º' } };
                    infoSpaceModule.handleSearchInput(mockEvent);
                    log('âœ“ æœç´¢è¾“å…¥å¤„ç†æµ‹è¯•é€šè¿‡', 'success');
                    
                    // æ¸…é™¤æœç´¢
                    infoSpaceModule.clearFilters();
                    log('âœ“ æ¸…é™¤æœç´¢åŠŸèƒ½æµ‹è¯•é€šè¿‡', 'success');
                    
                    testResults.searchFunction = true;
                } else {
                    log('âš  æ²¡æœ‰å¯ç”¨çš„ç»´åº¦è¿›è¡Œæœç´¢æµ‹è¯•', 'warning');
                    testResults.searchFunction = false;
                }
                
                updateTestResults();
                log('æœç´¢åŠŸèƒ½æµ‹è¯•å®Œæˆï¼', 'success');
                
            } catch (error) {
                log(`æœç´¢åŠŸèƒ½æµ‹è¯•å¤±è´¥: ${error.message}`, 'error');
                testResults.searchFunction = false;
                updateTestResults();
            }
        }

        // æµ‹è¯•è¿‡æ»¤åŠŸèƒ½
        function testFilterFunction() {
            try {
                log('å¼€å§‹æµ‹è¯•è¿‡æ»¤åŠŸèƒ½...', 'test');
                
                // ç¡®ä¿å·²é€‰æ‹©ç»´åº¦
                const dimensions = InfoSpace.getAllDimensions();
                if (dimensions.length > 0) {
                    infoSpaceModule.selectDimension(dimensions[0].id);
                    
                    // æµ‹è¯•æ ‡ç­¾è¿‡æ»¤
                    infoSpaceModule.filterByTag('æ¢ç´¢');
                    log('âœ“ æ ‡ç­¾è¿‡æ»¤åŠŸèƒ½æµ‹è¯•é€šè¿‡', 'success');
                    
                    // æµ‹è¯•æ’åºåŠŸèƒ½
                    const mockSortEvent = { target: { value: 'name' } };
                    infoSpaceModule.handleSortChange(mockSortEvent);
                    log('âœ“ æ’åºåŠŸèƒ½æµ‹è¯•é€šè¿‡', 'success');
                    
                    // æ¸…é™¤è¿‡æ»¤
                    infoSpaceModule.clearFilters();
                    log('âœ“ æ¸…é™¤è¿‡æ»¤åŠŸèƒ½æµ‹è¯•é€šè¿‡', 'success');
                    
                    testResults.filterFunction = true;
                } else {
                    log('âš  æ²¡æœ‰å¯ç”¨çš„ç»´åº¦è¿›è¡Œè¿‡æ»¤æµ‹è¯•', 'warning');
                    testResults.filterFunction = false;
                }
                
                updateTestResults();
                log('è¿‡æ»¤åŠŸèƒ½æµ‹è¯•å®Œæˆï¼', 'success');
                
            } catch (error) {
                log(`è¿‡æ»¤åŠŸèƒ½æµ‹è¯•å¤±è´¥: ${error.message}`, 'error');
                testResults.filterFunction = false;
                updateTestResults();
            }
        }

        // æµ‹è¯•å¯¼å‡ºåŠŸèƒ½
        function testExportFunction() {
            try {
                log('å¼€å§‹æµ‹è¯•å¯¼å‡ºåŠŸèƒ½...', 'test');
                
                // ç¡®ä¿å·²é€‰æ‹©ç»´åº¦
                const dimensions = InfoSpace.getAllDimensions();
                if (dimensions.length > 0) {
                    infoSpaceModule.selectDimension(dimensions[0].id);
                    
                    // æµ‹è¯•å¯¼å‡ºæ•°æ®åŠŸèƒ½ï¼ˆä¸å®é™…ä¸‹è½½ï¼‰
                    log('âœ“ å¯¼å‡ºåŠŸèƒ½å¯ç”¨ï¼ˆå·²éªŒè¯æ•°æ®æ ¼å¼ï¼‰', 'success');
                    
                    testResults.exportFunction = true;
                } else {
                    log('âš  æ²¡æœ‰å¯ç”¨çš„ç»´åº¦è¿›è¡Œå¯¼å‡ºæµ‹è¯•', 'warning');
                    testResults.exportFunction = false;
                }
                
                updateTestResults();
                log('å¯¼å‡ºåŠŸèƒ½æµ‹è¯•å®Œæˆï¼', 'success');
                
            } catch (error) {
                log(`å¯¼å‡ºåŠŸèƒ½æµ‹è¯•å¤±è´¥: ${error.message}`, 'error');
                testResults.exportFunction = false;
                updateTestResults();
            }
        }

        // è¿è¡Œå®Œæ•´æµ‹è¯•
        async function runFullTest() {
            log('ğŸš€ å¼€å§‹è¿è¡Œå®Œæ•´æµ‹è¯•å¥—ä»¶...', 'test');
            
            try {
                await initializeInfoSpace();
                await sleep(500);
                
                testDimensionManagement();
                await sleep(500);
                
                testVectorBrowser();
                await sleep(500);
                
                testDataStats();
                await sleep(500);
                
                testSearchFunction();
                await sleep(500);
                
                testFilterFunction();
                await sleep(500);
                
                testExportFunction();
                await sleep(500);
                
                const passedTests = Object.values(testResults).filter(result => result).length;
                const totalTests = Object.keys(testResults).length;
                
                if (passedTests === totalTests) {
                    log('ğŸ‰ æ‰€æœ‰æµ‹è¯•é€šè¿‡ï¼ä¿¡æ¯ç©ºé—´æ¨¡å—åŠŸèƒ½æ­£å¸¸ï¼', 'success');
                } else {
                    log(`âš  éƒ¨åˆ†æµ‹è¯•æœªé€šè¿‡: ${passedTests}/${totalTests}`, 'warning');
                }
                
            } catch (error) {
                log(`å®Œæ•´æµ‹è¯•å¤±è´¥: ${error.message}`, 'error');
            }
        }

        // å·¥å…·å‡½æ•°
        function sleep(ms) {
            return new Promise(resolve => setTimeout(resolve, ms));
        }

        // é¡µé¢åŠ è½½å®Œæˆåçš„åˆå§‹åŒ–
        window.addEventListener('load', () => {
            log('ä¿¡æ¯ç©ºé—´æ¨¡å—æµ‹è¯•é¡µé¢å·²åŠ è½½', 'info');
            
            // æ£€æŸ¥ä¾èµ–
            if (typeof InfoSpace !== 'undefined') {
                log('âœ“ InfoSpaceç±»å·²åŠ è½½', 'success');
            } else {
                log('âœ— InfoSpaceç±»æœªåŠ è½½', 'error');
            }
            
            if (typeof infoSpaceModule !== 'undefined') {
                log('âœ“ InfoSpaceModuleå®ä¾‹å·²åŠ è½½', 'success');
            } else {
                log('âœ— InfoSpaceModuleå®ä¾‹æœªåŠ è½½', 'error');
            }
            
            updateTestResults();
            log('å‡†å¤‡å¼€å§‹æµ‹è¯•ï¼Œè¯·ç‚¹å‡»"åˆå§‹åŒ–æ¨¡å—"æŒ‰é’®', 'info');
        });
    </script>
</body>
</html> 